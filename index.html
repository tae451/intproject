<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>MMCC Project</title>
    <link href="styles.css" rel="stylesheet">
    <script src="jquery-3.7.1.min.js"></script>
    <script src="jquery-ui.js"></script>
    
    <script>
        $(document).ready(function () {
            //Draggable windows
            $(".window").draggable({ containment: "body", scroll: false, handle:".titlebar" });
            $("#page1").load("testpage.html");

            //Load dialogue texts
            const dialogues = ["This is my first", "My second message.", "Really last one"];

            for (let i = 0; i < dialogues.length; i++) {
                $("#chatwindow").append("<p>" + dialogues[i] + "</p>")
            }

            //Array to keep windows in order of last interacted with
            let windows = $(".window").toArray();
            windows.forEach(function(item) {
                console.log("This is " + $(item).prop('id'));
            });
            let windowIndexRange = 50; //z index range for windows starts at

            //rearrange windows when clicked
            $(".window").mousedown(function () {
                bringToFront(this);
            });

            //bring active window to end of array
            function bringToFront(interactedWindow) {
                windows = windows.filter(a => a !== interactedWindow);
                windows.push(interactedWindow);
                for (let i = 0; i < windows.length; i++) {
                    console.log(i + " " + $(windows[i]).prop('id'));
                    $(windows[i]).css("z-index", i + windowIndexRange);
                }
                $(".titlebar").removeClass("activetitlebar");
                $(interactedWindow).find(".titlebar").addClass("activetitlebar");
            }

            //Stages of progress, each has a bit for dialogue or game or whatever
        });
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Raleway&display=swap');
    </style>
</head>

<body>
    <nav id="taskbar">
        <a class="taskbutton">Browser</a>
        <a class="taskbutton">Dyscord</a>
        <a class="taskbutton">Settings</a>
        <a class="taskbutton">FileShark</a>
    </nav>
    <div class="window" id="browserwindow">
        <div class="titlebar"></div>
        <div class="pagecontent" id="page1">
            <p>This is page one</p>
        </div>
    </div>
    <div class="window" id="chatwindow">
        <div class="titlebar"></div>
        <p>also a test</p>
    </div>
    <div class="window" id="settingswindow">
        <div class="titlebar"></div>
        <p>these are settings</p>
    </div>
    <div class="window debugrandomloc" id="testone">
        <div class="titlebar"></div>
        <p>test for window array</p>
    </div>
    <div class="window debugrandomloc" id="testtwo">
        <div class="titlebar"></div>
        <p>test for window array 2</p>
    </div>
</body>

</html>